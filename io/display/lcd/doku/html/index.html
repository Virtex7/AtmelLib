<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>HD44780 Library: HD44780 Display Library for Atmel AVR Microcontrollers</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>HD44780 Display Library for Atmel AVR Microcontrollers</h1>
<p>
<h2><a class="anchor" name="including-into-prog">
Including the library into your program</a></h2>
Just include the file <a class="el" href="lcd_8c-source.html">lcd.c</a> (not .h!) into your main program. <div class="fragment"><pre class="fragment"><span class="preprocessor"> #include "./lcd/lcd.c"</span> 
</pre></div><h2><a class="anchor" name="features">
Features</a></h2>
As long as the interrupt does not change the port that the display is connected to, the library should be interrupt-safe.<h2><a class="anchor" name="interfacing">
Interfacing the Display to the Microcontroller</a></h2>
<h3><a class="anchor" name="direct_4bit">
Direct Interfacing in 4-bit mode</a></h3>
In 4-bit mode, 6 IO pins are needed. Data lines D4-D7, E and RS are connected to the microcontroller. RW can be directly connected to ground. If you already connected RW to the microcontroller, define LCD_RW_PIN and it will automatically be set to low. D0-D3 can be left unconnected. 4-bit-mode needs only about 1 microsecond longer per command than 8-bit-mode, but 8-bit-mode needs four more IO pins.<p>
This mode is selected by defining LCD_MODE_4BIT. LCD_PORT, LCD_DDR, LCD_EN_PIN, LCD_RS_PIN and LCD_D4_PIN need to be defined. D4,D5,D6,D7 are connected to LCD_D4_PIN, LCD_D4_PIN+1, and so on.<p>
Example: <div class="fragment"><pre class="fragment"><span class="preprocessor">#define LCD_MODE_4BIT</span>
<span class="preprocessor"></span><span class="preprocessor">#define LCD_PORT PORTA</span>
<span class="preprocessor"></span><span class="preprocessor">#define LCD_DDR DDRA</span>
<span class="preprocessor"></span><span class="preprocessor">#define LCD_EN_PIN PA4</span>
<span class="preprocessor"></span><span class="preprocessor">#define LCD_RS_PIN PA5</span>
<span class="preprocessor"></span><span class="comment">// D4 -&gt; PA0, D5 -&gt; PA1, D6 -&gt; PA2, D7 -&gt; PA3</span>
<span class="preprocessor">#define LCD_D4_PIN PA0</span>
<span class="preprocessor"></span><span class="comment">// optional:</span>
<span class="preprocessor">#define LCD_RW_PIN PA6</span>
</pre></div><h3><a class="anchor" name="shiftregister_4bit">
Shift Register in 4-bit-mode</a></h3>
Only three IO pins are needed for shift register mode. These are connected to a shift register (74(V)HC(T)595 or similar, 8 bit, serial input, parallel output with latch).<p>
This mode is selected by defining LCD_MODE_SHIFT_4BIT. LCD_SHIFT_PORT, LCD_SHIFT_DDR, LCD_SHIFT_DATA_PIN, LCD_SHIFT_CLOCK_PIN, LCD_SHIFT_LATCH_PIN define the connections to the shift register. For 595-style shift registers, clock is SCK (shift clock), latch is RCK (register clock) and data is D. Set LCD_EN_PIN, LCD_RS_PIN and LCD_D4_PIN to the pin numbers at the shift register. D4, D5, D6 and D7 of the LCD are connected to output LCD_D4_PIN, LCD_D4_pin+1, and so on.<h2><a class="anchor" name="display_conf">
Display Size Configuration</a></h2>
The display size is set with LCD_COLS and LCD_LINES. For most displays, this is the real value of columns and lines. Usually each line can be a maximum of 40 characters wide, a display may be a maximum of 4 lines high. Displays with more than two lines or non-standard displays require special configuration, which is described in the next sections.<h3><a class="anchor" name="one_ctrl_more_lines">
One-Controller Displays with "half" lines</a></h3>
Some displays behave as if they were twice as wide and half as high. They just display every long internal line as two lines. For such displays, use the real value for columns and lines, and define LCD_HALF_LINES. In this mode a display may be up to 8 lines high, but only up to 20 characters wide.<p>
The only difference between using this mode and setting double width and half height is that lcd_set_line works correctly.<h3><a class="anchor" name="one_ctrl_four_lines">
Displays with special memory layout</a></h3>
Some displays have a memory layout that doesn't follow the default of line 1 = 0x00, line 2 = 0x40. A different memory layout can be used by defining LCD_SPECIAL_LINE_LAYOUT and LCD_LINE1_ADDR to LCD_LINE4_ADDR. The typical layout for 4x16 character displays with only one controller is 0x00, 0x40, 0x10, 0x50. If you configured such a display as 2x32 characters (or 4x16 with LCD_HALF_LINES), the second and third line would be swapped.<p>
Example: <div class="fragment"><pre class="fragment"><span class="preprocessor">#define LCD_SPECIAL_LINE_LAYOUT</span>
<span class="preprocessor"></span><span class="preprocessor">#define LCD_LINE1_ADDR 0x00</span>
<span class="preprocessor"></span><span class="preprocessor">#define LCD_LINE2_ADDR 0x40</span>
<span class="preprocessor"></span><span class="preprocessor">#define LCD_LINE3_ADDR 0x10</span>
<span class="preprocessor">#define LCD_LINE4_ADDR 0x50</span>
</pre></div><h3><a class="anchor" name="two_ctrl_display">
Two-Controller Displays with four lines</a></h3>
If a display has two controllers, it has two separate EN pins. You need to define the EN2 pin number with LCD_EN2_PIN. Such a display has to be configured for at least two lines. If you really have a one-line display that is more than 80 characters wide, configure it as two lines high and twice as wide.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#define LCD_TWO_CONTROLLERS</span>
</pre></div> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Nov 6 17:15:22 2010 for HD44780 Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
